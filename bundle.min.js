(()=>{document.addEventListener("DOMContentLoaded",async()=>{let r="https://pwnysdqtryhpsxbwduxx.supabase.co/storage/v1/object/public/cache/listProducts.json",a=document.querySelector(".iframe__nav"),g=document.querySelector(".seo__wrapper"),u=document.querySelector(".skeleton-container"),l=document.querySelector(".iframe__categorias-container"),i=document.querySelector("#producto-template");if(!l||!i){console.error("Error: No se encontr\xF3 .iframe__categorias-container o el template");return}let y=()=>{let o=document.createElement("div");return o.classList.add("skeleton"),o.innerHTML=`
         <div class="skeleton-image"></div>
         <div class="skeleton-text"></div>
      `,o},h=()=>{let s=window.innerWidth<=768?18:12;u.innerHTML="";for(let f=0;f<s;f++)u.appendChild(y())},n=o=>o.replace(/(\d+%|ofertas|\$\d{1,3}(\.\d{3})*(,\d+)?|\d+\s*(ml|ML)|ENVÍO\sGRATIS)/gi,s=>`<span class="iframe__categorias-span" style="font-weight: bold; color: red;">${s}</span>`),d=o=>o?/SOLO X \d+ HORAS/i.test(o)||o.toUpperCase()==="AGOTADO"?{borderColor:"red",bgColor:"red",textColor:"white",text:o.toUpperCase(),borderWidth:"3px"}:o.toUpperCase()==="LANZAMIENTO"?{borderColor:"#aad500",bgColor:"#aad500",textColor:"black",text:"LANZAMIENTO",borderWidth:"3px"}:{borderColor:"rgb(223, 223, 223)",bgColor:"transparent",textColor:"black",text:"",borderWidth:"1px"}:{borderColor:"rgb(223, 223, 223)",bgColor:"transparent",textColor:"black",text:"",borderWidth:"1px"},m=o=>{let s=new Date;s.setHours(0,0,0,0),l.innerHTML="";let f=document.createDocumentFragment();if(o.some(e=>/SOLO X \d+ HORAS/i.test(e.offerState))&&!document.querySelector('[data-category-name="SoloX"]')){let e=document.querySelector(".iframe__nav"),t=document.createElement("a");t.href="#SoloX",t.className="iframe__nav-item",t.dataset.categoryName="SoloX",t.textContent="Solo X Horas",e.appendChild(t)}o.filter(e=>{let t=new Date(e.startDate),c=new Date(e.endDate);return!e.isProductHidden&&s>=t&&s<=c}).sort((e,t)=>e.orderSellout-t.orderSellout).forEach(e=>{let t=d(e.offerState),c=i.content.cloneNode(!0),p=c.querySelector(".iframe__categorias-link"),S=c.querySelector(".iframe__categorias-image"),T=c.querySelector(".iframe__categorias-productTitle"),v=c.querySelector(".iframe__tag--desk"),C=c.querySelector(".iframe__tag--mobile");p.href=e.urlProduct,p.dataset.id=e.id,p.dataset.title=e.title,p.dataset.category=/SOLO X \d+ HORAS/i.test(e.offerState)?`${e.category} SoloX`:e.category,S.src=e.urlImage,S.alt=e.title||"Imagen de producto",S.style.border=`${t.borderWidth} solid ${t.borderColor}`,T.innerHTML=n(e.title||""),t.text?(v.style.backgroundColor=t.bgColor,v.style.color=t.textColor,v.innerHTML=`<b class="iframe__tag--bold">${t.text}</b>`,C.style.backgroundColor=t.bgColor,C.style.color=t.textColor,C.innerHTML=`<b class="iframe__tag--bold">${t.text}</b>`):(v.remove(),C.remove()),f.appendChild(c)}),l.appendChild(f),a.style.opacity="0",a.style.display="flex",g.style.display="block",setTimeout(()=>{l.classList.add("iframe__categorias-container--show"),a.style.transition="opacity 0.5s ease-in-out",a.style.opacity="1";let e=new Event("navCargado");document.dispatchEvent(e)},100)};(async()=>{try{h();let s=await(await fetch(r)).json();if(!s||!Array.isArray(s)){console.error("Error: Datos no v\xE1lidos",s);return}u.style.display="none",m(s)}catch(o){console.error("Error al cargar los datos:",o)}})()});document.addEventListener("navCargado",()=>{let r=document.querySelector(".iframe__nav"),a=document.querySelectorAll(".iframe__nav-item"),g=document.querySelectorAll(".iframe__categorias-link"),u=document.querySelector(".iframe__banner"),l=document.querySelector('[data-category-name="VerTodo"]'),i="VerTodo",y=()=>{g.forEach(n=>n.style.display="block")},h=n=>{g.forEach(d=>{let b=(d.getAttribute("data-category")||"").split(" ");d.style.display=b.includes(n)?"block":"none"})};y(),a.forEach(n=>{n.addEventListener("click",function(d){d.preventDefault();let m=n.getAttribute("data-category-name");a.forEach(b=>b.classList.remove("selected","ver-todo-active")),m==="VerTodo"?(i="VerTodo",y(),n.classList.add("ver-todo-active")):(i=m,h(m)),n.classList.add("selected"),r.scrollTo({left:n.offsetLeft-r.offsetLeft,behavior:"smooth"})})}),u.addEventListener("click",()=>{i="VerTodo",y(),a.forEach(n=>n.classList.remove("selected","ver-todo-active")),l.classList.add("selected","ver-todo-active"),r.scrollTo({left:l.offsetLeft-r.offsetLeft,behavior:"smooth"})})});var x=0,E;function _(){let r=document.querySelector(".main__container");if(r){let a=r.getBoundingClientRect().height;a>0&&a!==x&&(window.parent.postMessage(a,"*"),x=a)}}window.addEventListener("load",()=>{_()});document.addEventListener("navCargado",()=>{_(),k()});function k(){let r=document.querySelector(".main__container"),a={attributes:!0,childList:!0,subtree:!0};r&&(E=new MutationObserver(_),E.observe(r,a))}setTimeout(()=>{_(),k()},4e3);var L=document.querySelector(".seo__toggle-btn");L.addEventListener("click",()=>{let r=document.getElementById("seoContent");r.style.display==="none"||r.style.display===""?(r.style.display="block",L.textContent="Ver menos"):(r.style.display="none",L.textContent="Ver m\xE1s")});})();
